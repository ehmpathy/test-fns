# execution log: genTempDir

## status: in progress

---

## phase 0: pure logic

### step 0.1: computeTempDirName
- [ ] create `src/domain.operations/genTempDir/computeTempDirName.ts`
- [ ] create `src/domain.operations/genTempDir/computeTempDirName.vitest.test.ts`
- [ ] verify: `npm run test:unit -- computeTempDirName`

### step 0.2: computeStaleDirs
- [ ] create `src/domain.operations/genTempDir/computeStaleDirs.ts`
- [ ] create `src/domain.operations/genTempDir/computeStaleDirs.vitest.test.ts`
- [ ] verify: `npm run test:unit -- computeStaleDirs`

---

## phase 1: infra layer

### step 1.1: getGitRoot
- [ ] create `src/infra/isomorph.fs/getGitRoot.ts`

### step 1.2: ensureTempDir
- [ ] create `src/infra/isomorph.fs/ensureTempDir.ts`

### step 1.3: cloneFixture
- [ ] create `src/infra/isomorph.fs/cloneFixture.ts`

---

## phase 2: domain operations

### step 2.1: pruneStale + pruneStaleOnce
- [ ] create `src/domain.operations/genTempDir/pruneStale.ts`
- [ ] create `src/domain.operations/genTempDir/pruneStale.integration.vitest.test.ts`
- [ ] verify: `npm run test:integration -- pruneStale`

### step 2.2: genTempDir + isTempDir
- [ ] create `src/domain.operations/genTempDir/genTempDir.ts`
- [ ] create `src/domain.operations/genTempDir/genTempDir.vitest.test.ts`
- [ ] create `src/domain.operations/genTempDir/genTempDir.integration.vitest.test.ts`
- [ ] verify: `npm run test:unit -- genTempDir.vitest.test`
- [ ] verify: `npm run test:integration -- genTempDir.integration`

---

## phase 3: contract + docs

### step 3.1: contract export
- [ ] update `src/contract/index.ts`

### step 3.2: acceptance tests
- [ ] create `src/domain.operations/genTempDir/genTempDir.acceptance.vitest.test.ts`
- [ ] verify: `npm run test:acceptance -- genTempDir`

### step 3.3: readme documentation
- [ ] update `readme.md`

---

## phase 4: validation

### step 4.1: full test suite
- [ ] `npm run test:types`
- [ ] `npm run test:lint`
- [ ] `npm run test:unit`
- [ ] `npm run test:integration`
- [ ] `npm run test:acceptance`

### step 4.2: ci validation
- [ ] push to branch
- [ ] verify ci passes

---

## completion checklist

- [ ] usecase.1 — ephemeral test directory generation
- [ ] usecase.2 — fixture clone
- [ ] usecase.3 — automatic cleanup
- [ ] usecase.4 — cross-platform portability
- [ ] usecase.5 — discoverability and documentation
- [ ] boundary.1 — edge cases
